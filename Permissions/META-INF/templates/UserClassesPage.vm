## User classes page. 

#macro( removeUnderscores $arg )
	$arg.replaceAll("_", " ")
#end

#macro( removeSpaces $arg )
	$arg.replaceAll(" ", "")
#end

## Add class button
<div id="perm-buttonbar">
	<ul>
		<li><a id="perm-createclass">
				<img src="/img/perm-add.png" alt="Add" />
				<br />
				Add Class
		</a></li>
	</ul>
</div>

<div id="userclasses" class="perm-page">
	<div class="perm-pagetitle">
		<span class="ui-icon ui-icon-person"></span>
		<span id="secondclassicon" class="ui-icon ui-icon-person"></span>
        User Classes:
	</div>
	<ul id="userclasslist" class="perm-list">
        #foreach( $uc in $userClasses )
			#set( $id = $uc.getName() )
        <li id="$id" class="perm-userclass">
            <a class="perm-userclasstitle #if( $uc.isActive() ) activeclass #else inactiveclass #end">
				<span class="ui-icon ui-icon-circle-arrow-e"></span>
				#removeUnderscores( $uc.getName().replaceAll(" ", "") )
			</a>
			<div class="perm-userclassdetails">
				<div class="perm-userclassfields perm-userclasspanel">
    				<div>
    					<label for="$id-isActive">Active:</label>
    					<input type="checkbox" id="$id-isActive" #if( $uc.isActive() ) checked="checked" #end disabled="disabled" />
    				</div>
    				<div>
    					<label for="$id-isQueuable">Allow Queuing:</label>
    					<input type="checkbox" id="$id-isQueueable" #if( $uc.isQueuable() ) checked="checked" #end disabled="disabled" />
    				</div>
    				<div>
    					<label for="$id-isBookable">Allow Reservations:</label>
    					<input type="checkbox" id="$id-isBookable" #if( $uc.isBookable() ) checked="checked" #end disabled="disabled" />
    				</div>
    					
    				#if( $uc.isQueuable() )
    					<div>
    						<label for="$id-priority">Priority:</label>
    						<input type="text" id="$id-getPriority" value="$uc.getPriority()" disabled="disabled" />
    					</div>
    				#end
    					
    				#if( $uc.isBookable() )
    					<div>
    						<label for="$id-priority">Time Horizon:</label>
    						<input type="text" id="$id-getTimeHorizon" value="$uc.getTimeHorizon()" disabled="disabled" />
    					</div>
    				#end
				</div>
				<div class="perm-userclassoperations perm-userclasspanel">
					<ul>
                		<li><a class="perm-createclass">
                				<img src="/img/perm-edit.png" alt="Edit" />
                				<br />
                				Edit
                		</a></li>
						<li><a class="perm-createclass">
                				<img src="/img/perm-delete.png" alt="Delete" />
                				<br />
                				Delete
                		</a></li>
                	</ul>
				</div>
				<div class="perm-userclasspermissions perm-userclasspanel">
					#if ( $uc.getResourcePermissions() && $uc.getResourcePermissions().size() > 0 )
    					 Number: $uc.getResourcePermissions.size()
					#else
						<div class="ui-state ui-state-highlight ui-corner-all">
							<span class="ui-icon ui-icon-info"></span>
							No permissions.
						</div>
					#end
				</div>
				<div class="perm-userclasspermissionsoperations perm-userclasspanel">
					
				</div>
				<div style="clear:both"></div>
			</div>
        </li>
        #end
    </ul>
</div>
	
<script type="text/javascript">
$(document).ready(function() {
	$(".perm-userclasstitle").click(function() {
		var $details = $(this).next();
		var isClosed = $details.css("display") == "none";
		
		$(".perm-userclass .open")
			.slideUp()
			.removeClass("open")
			.prev().children("span")
				.removeClass("ui-icon-circle-arrow-s")
				.addClass("ui-icon-circle-arrow-e");
		
		if (isClosed)
		{
			$(this).children("span")
				.removeClass("ui-icon-circle-arrow-e")
				.addClass("ui-icon-circle-arrow-s");
				
			$details
				.addClass("open")
				.slideDown();
		}
	});
});
</script>